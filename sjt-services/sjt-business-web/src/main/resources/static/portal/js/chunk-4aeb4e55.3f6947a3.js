(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4aeb4e55"],{"26cf":function(t,e,r){},"3a71":function(t,e,r){"use strict";var a=r("26cf"),s=r.n(a);s.a},af4b:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"mgb5"},[r("Input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入订单号"},model:{value:t.query.orderNo,callback:function(e){t.$set(t.query,"orderNo",e)},expression:"query.orderNo"}}),r("Select",{staticClass:"mgl10",staticStyle:{width:"200px"},on:{"on-change":t.getOrders},model:{value:t.query.status,callback:function(e){t.$set(t.query,"status",e)},expression:"query.status"}},[r("Option",{attrs:{value:""}},[t._v("全部")]),r("Option",{attrs:{value:"1"}},[t._v("待付款")]),r("Option",{attrs:{value:"2"}},[t._v("待发货")]),r("Option",{attrs:{value:"3"}},[t._v("待收货")]),r("Option",{attrs:{value:"4"}},[t._v("已完成")]),r("Option",{attrs:{value:"5"}},[t._v("已取消")])],1),r("DatePicker",{staticClass:"mgl10",staticStyle:{width:"200px"},attrs:{type:"daterange",placeholder:"请选择日期",confirm:"","split-panels":""},on:{"on-change":t.changeDate}}),r("Button",{staticClass:"mgl10",attrs:{type:"primary"},on:{click:t.getOrders}},[t._v("查询")])],1),r("Table",{attrs:{stripe:"",columns:t.tabColumns,data:t.orders},scopedSlots:t._u([{key:"shippingCode",fn:function(e){var r=e.row;return[t._v("\n      "+t._s(r.shippingCode||"-")+"\n    ")]}},{key:"payment",fn:function(e){var r=e.row;return[t._v("\n      "+t._s(r.payment)+"元\n    ")]}},{key:"status",fn:function(e){var a=e.row;return[r("Tag",{attrs:{color:t.orderStatusMap(a.status).code}},[t._v(t._s(t.orderStatusMap(a.status).name))])]}},{key:"consignDate",fn:function(e){var r=e.row;return[t._v("\n      "+t._s(t.u.formatDate(r.consignDate))+"\n    ")]}},{key:"paymentDate",fn:function(e){var r=e.row;return[t._v("\n      "+t._s(t.u.formatDate(r.paymentDate))+"\n    ")]}},{key:"handle",fn:function(e){var a=e.row;return[r("Button",{directives:[{name:"show",rawName:"v-show",value:"2"===a.status,expression:"row.status === '2'"}],attrs:{type:"info"},on:{click:function(e){return t.openEditLogisticsModal(a)}}},[t._v("编辑物流")]),r("Button",{staticClass:"mgl5",on:{click:function(e){return t.openDrawer(a.id)}}},[t._v("详情")])]}}])}),r("div",{staticClass:"text-center page "},[r("Page",{attrs:{total:t.page.total,"show-sizer":"","show-total":"",current:t.page.pageNo,"page-size":t.page.pageSize},on:{"on-change":t.pageNoChange,"on-page-size-change":t.pageSizeChange}})],1),r("Drawer",{attrs:{title:"订单详情",width:"500"},on:{"on-visible-change":t.drawerChange},model:{value:t.drawerFlag,callback:function(e){t.drawerFlag=e},expression:"drawerFlag"}},[r("div",{staticClass:"mgb20"},[r("div",{staticClass:"border-bottom mgt20"},[t._v("收货地址")]),r("div",{staticClass:"item-content"},[r("Row",{staticClass:"mgb5"},[r("Col",{attrs:{span:"11"}},[t._v("联系人")]),r("Col",{staticClass:"text-right",attrs:{span:"13"}},[t._v(t._s(t.orderDetail.contactName||"无"))])],1),r("Row",{staticClass:"mgb5"},[r("Col",{attrs:{span:"11"}},[t._v("联系电话")]),r("Col",{staticClass:"text-right",attrs:{span:"13"}},[t._v(t._s(t.orderDetail.contactPhone||"无"))])],1),r("Row",[r("Col",{attrs:{span:"11"}},[t._v("联系地址")]),r("Col",{staticClass:"text-right",attrs:{span:"13"}},[t._v(t._s(t.orderDetail.address||"无"))])],1)],1)]),r("div",[r("div",{staticClass:"border-bottom mgt5"},[t._v("订单信息")]),r("div",{staticClass:"item-content"},[r("div",{staticClass:"border-bottom mgb5"},[t._v("订单详情")]),t._l(t.orderDetail.orderItems,function(e,a){return r("div",{key:a},[r("div",{staticStyle:{"background-color":"#ffffff"}},[r("Row",[r("Col",{attrs:{span:"3"}},[r("Card",{staticClass:"order-item",attrs:{padding:0,"dis-hover":"",bordered:!1}},[r("img",{staticClass:"order-item-img",attrs:{src:e.productImg}})])],1),r("Col",{staticStyle:{"padding-left":"10px"},attrs:{span:"18"}},[r("div",{staticStyle:{"margin-top":"15px"}},[r("H4",[t._v(t._s(e.productName))])],1),r("div",[r("span",{staticStyle:{"font-size":"12px",color:"#ccc"}},[t._v(t._s(e.productDescript))])])]),r("Col",{staticClass:"text-right",staticStyle:{"padding-right":"10px"},attrs:{span:"3"}},[r("div",{staticStyle:{"margin-top":"15px"}},[t._v(t._s(e.price)+"元")]),r("div",[t._v("×"+t._s(e.num))])])],1)],1),r("div",{staticClass:"border-bottom"})])}),r("div",{staticClass:"border-bottom mgb5 mgt20"},[t._v("订单基本信息")]),r("Row",{staticClass:"mgb5"},[r("Col",{attrs:{span:"11"}},[t._v("订单号")]),r("Col",{staticClass:"text-right",attrs:{span:"13"}},[t._v(t._s(t.orderDetail.orderNo))])],1),r("Row",{staticClass:"mgb5"},[r("Col",{attrs:{span:"11"}},[t._v("订单总价")]),r("Col",{staticClass:"text-right",attrs:{span:"13"}},[t._v(t._s(t.orderDetail.orgAmount)+"元")])],1)],2)])]),r("Modal",{attrs:{title:"编辑物流单号"},on:{"on-visible-change":t.modalChange},model:{value:t.modalFlag,callback:function(e){t.modalFlag=e},expression:"modalFlag"}},[r("Form",{ref:"formValidate",attrs:{model:t.orderItem,"label-width":80,rules:t.formRules}},[r("FormItem",{attrs:{label:"物流单号",prop:"shippingCode"}},[r("Input",{attrs:{name:"shippingCode",type:"number",maxlength:15,placeholder:"请输入物流单号",size:"large"},model:{value:t.orderItem.shippingCode,callback:function(e){t.$set(t.orderItem,"shippingCode",e)},expression:"orderItem.shippingCode"}})],1)],1),r("template",{slot:"footer"},[r("Button",{on:{click:function(e){t.modalFlag=!1}}},[t._v("取消")]),r("Button",{attrs:{type:"primary"},on:{click:t.eidtOrder}},[t._v("确认")])],1)],2)],1)},s=[],o=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),n=r("8fde"),i=r("ab3e");function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(r,!0).forEach(function(e){Object(o["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function d(t){return Object(i["a"])("/order/manage/query",l({},t))}function p(t){return Object(i["b"])("/order/manage/logistics/import",l({},t))}function u(t){var e={orderId:t};return Object(i["a"])("/order/manage/detail",e)}function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(r,!0).forEach(function(e){Object(o["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var f={name:"LogisticsManage",created:function(){this.getOrders()},data:function(){return{modalFlag:!1,drawerFlag:!1,page:{pageNo:1,pageSize:10,total:0},query:{status:""},orderItem:{orderId:void 0,shippingCode:void 0},orders:[],orderDetail:{},tabColumns:[{title:"序号",type:"index",align:"center",width:60},{title:"订单号",key:"orderNo",align:"center"},{title:"物流单号",slot:"shippingCode",align:"center",width:140},{title:"支付金额",slot:"payment",align:"center",width:90},{title:"订单状态",slot:"status",align:"center",width:100},{title:"发货时间",slot:"consignDate",align:"center",width:150},{title:"支付时间",slot:"paymentDate",align:"center",width:150},{title:"操作",slot:"handle",align:"center",width:180}],formRules:{shippingCode:[{validator:n["a"].empty("物流单号不能为空"),trigger:"blur"},{validator:n["a"].lengthCheck(12,15),trigger:"blur"}]}}},methods:{changeDate:function(t){this.query.startDate=t[0],this.query.endDate=t[1]},getOrders:function(){var t=this;d(m({},this.query,{},this.page)).then(function(e){e.success(function(e){t.orders=e.page.rows,t.page.total=e.page.total})})},openEditLogisticsModal:function(t){this.modalFlag=!0,this.orderItem.orderId=t.id,this.orderItem.shippingCode=t.shippingCode},eidtOrder:function(){var t=this;this.$refs["formValidate"].validate(function(e){e&&p(m({},t.orderItem)).then(function(e){e.success(function(e){t.$Message.success(e.message),t.modalFlag=!1,t.getOrders()})})})},modalChange:function(t){t||(this.orderItem.shippingCode=void 0,this.orderItem.orderId=void 0)},drawerChange:function(t){t||(this.orderDetail={})},openDrawer:function(t){var e=this;this.drawerFlag=!0,u(t).then(function(t){t.success(function(t){e.orderDetail=t.data})})},orderStatusMap:function(t){switch(t){case"1":return{code:"default",name:"待支付"};case"2":return{code:"primary",name:"待发货"};case"3":return{code:"green",name:"待收货"};case"4":return{code:"success",name:"已完成"};case"5":return{code:"error",name:"已失效"}}},pageNoChange:function(t){this.page.pageNo=t,this.getOrders()},pageSizeChange:function(t){this.page.pageSize=t,this.getOrders()}}},h=f,v=(r("3a71"),r("2877")),b=Object(v["a"])(h,a,s,!1,null,"5198098f",null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-4aeb4e55.3f6947a3.js.map